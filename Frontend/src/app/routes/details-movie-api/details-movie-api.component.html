<app-mustbelogged></app-mustbelogged>
<div *ngIf="moviesdetails != null && (tokenStorage.isLoggedIn$ | async)">

  <div id="container_principale" class="container box-pages p-5">

    <button class="btn btn-outline-dark btn-lg" [routerLink]="['/moviesapi']">
      <h4>Movie api list</h4>
    </button>


    <div class="text-center">
      <table id="table1">

        <tr>
          <div class="container-fluid" class="text-center">
            <h2 class="font-weight-bold">Details</h2>
          </div>
        </tr>

        <tr>
          <div class="container box-pages p-4">
            <div class="text-center">
              <h2 class="font-weight-bold">{{moviesdetails.title}}</h2>
            </div>
          </div>
        </tr>

        <tr>
          <td>
            <div class="mt-5 p-4" style="text-align:center;">

              <div class="container box-pages p-4">

                <div class="film" id="image"><img src={{filmPathHTML}}></div>

                <ul class="list-group">
                  <li class="list-group-item">
                    <h4>Id : {{ moviesdetails.id }}</h4>
                  </li>
                  <li class="list-group-item">
                    <h4>Title : {{moviesdetails.title}}</h4>
                  </li>
                  <li class="list-group-item">
                    <h4>Lingua originale: {{moviesdetails.original_language}}</h4>
                  </li>
                  <li class="list-group-item">
                    <h4>Data di uscita : {{moviesdetails.release_date}}</h4>
                  </li>
                  <li class="list-group-item">
                    <h4>Voto : {{vote}}</h4>
                  </li>
                </ul>

              </div>

            </div>

          </td>
        </tr>

        <tr>
          <td>
            <div class="container box-pages p-4" *ngIf="viewComments">
              <table class="table">
                <thead class="thead-dark">
                  <tr>

                    <th scope="col">Username</th>
                    <th scope="col">Comment</th>

                  </tr>
                </thead>
                <tbody>
                  <ng-container *ngFor="let entry of commentRappresentation;let i=index">

                    <tr class="pointer">

                      <td >{{commentUsername[i]}}</td>
                      <td>{{entry.body}}</td>

                    </tr>
                  </ng-container>

                </tbody>
              </table>
            </div>
          </td>

        </tr>
        <br>

        <tr>
          <td>
            <div class="row">
              <!--<button class="btn btn-danger ml-5" (click)='delete()'>Delete</button>-->
              <button class="btn btn-outline-dark btn-lg" (click)="changeStatus()">
                <h4>Inserisci commento</h4>
              </button>
            </div>

            <div class="container box-pages p-4" *ngIf="visualizzaCommento">
              <div id="inserimentoCommento">

                <div *ngIf="visualizzaCondizione" class="text-center" id="testo_commento">
                  <div class="container box-pages p-2">
                    <h4>Il commento deve contenere almeno 20 caratteri</h4>
                  </div>
                </div>

                <form class="pt-5" (ngSubmit)="onSubmit(form)" #form="ngForm">

                  <div id="form_commento" class="form-group row">

                    <label for="commento" class="col-sm-2 col-form-label">
                      <h3>Commento: </h3>
                    </label>

                    <div class="col-sm-10">
                      <textarea type="text" class="form-control" id="exampleFormControlTextarea1" rows="3" required
                        ngModel name="commento" placeholder="Commento di almeno 20 caratteri"></textarea>
                    </div>

                    <div class="text-center">
                      <button type="submit" class="btn btn-outline-dark btn-lg">
                        <h4>Salva</h4>
                      </button>
                    </div>

                  </div>

                </form>

              </div>
            </div>
          </td>
        </tr>



      </table>
    </div>

  </div>
</div>

<app-loading-screen *ngIf="!moviesDataLoader && tokenStorage.isLoggedIn$ | async"></app-loading-screen>
